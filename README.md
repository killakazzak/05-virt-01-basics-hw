
# Домашнее задание к занятию 1.  «Введение в виртуализацию»

#### Это задание для самостоятельной отработки навыков и не предполагает обратной связи от преподавателя. Его выполнение не влияет на завершение модуля. Но мы рекомендуем его выполнить, чтобы закрепить полученные знания.  Все вопросы, возникающие в процессе выполнения заданий, пишите в учебный чат или в раздел "Вопросы по заданиям" в личном кабинете.

### Цели задания
1. Научиться запускать виртуальную машину в Yandex Cloud с минимальным расходом ресурсов.
2. Попрактиковаться в выборе платформы  и системы управления виртуализации для решения требуемых задач.

### Инструкция к выполению

1. Для выполнения задачи 1 ознакомьтесь с [инструкцией](https://github.com/netology-code/devops-materials/blob/master/cloudwork.MD) по экономии облачных ресурсов и затем выполните задачу 1 по шагам.
2. Своё решение к задачам 2,3,4 загрузите  в ваш ЛК.
   
## Задача 1

Ознакомьтесь с [инструкцией ](https://github.com/netology-code/devops-materials/blob/master/cloudwork.MD) по экономии облачных ресурсов.


1. Создайте через web-интерфейс Yandex Cloud - VPC и виртуальную машину из инструкции конфигурации "эконом-ВМ" с публичным ip-адресом. В пункте "Выбор образа/загрузочного диска" выберите вкладку "Cloud Marketplace" , щелкните "Посмотреть больше", найдите образ "Yandex Cloud Toolbox".
2. Убедитесь, что вы можете подключиться к консоли ВМ через ssh, используя публичный ip-адрес. Убедитесь, что на ВМ установлен Docker с помощью команды ```docker --version```(команду выполните от имени root пользователя) !
3. Узнайте в инструкции Яндекс, какие еще инструменты предустановлены в данном образе.
4. Оставьте ВМ работать, пока она не выключится самостоятельно! Опция "прерываемая" выключит ее не позже чем через 24 часа. 
5. Для наглядности подождите еще 1 сутки.
6. Перейдите по [ссылке ](https://console.cloud.yandex.ru/billing?section=accounts). Выберите свой платежный аккаунт. Перейдите на вкладку детализация (фильтр "По продуктам") и оцените график потребления финансов.
7. Удалите ВМ или пользуйтесь ею при выполнении последующих домашних заданий курса обучения.

---

## Решение Задача 1

![image](https://github.com/user-attachments/assets/2ee9c257-3bca-4abd-8933-cb2817568582)

![image](https://github.com/user-attachments/assets/45756f01-1ee3-4dd7-81eb-7a410ff66144)


```
Образ Yandex Cloud Toolbox построен на базе Ubuntu 22.04 LTS, в котором собраны следующие инструменты для управления ресурсами Yandex Cloud:

интерфейс командной строки Yandex Cloud;
Terraform — инструмент для управления облачной инфраструктурой от компании Hashicorp;
Packer — инструмент для сборки образов виртуальных машин от компании Hashicorp;
Pulumi — инструмент для управления облачной инфраструктурой с использованием традиционных языков программирования;
Helm — менеджер пакетов для Kubernetes;
kubectl — инструмент командной строки для управления кластерами Kubernetes;
gRPCurl — инструмент командной строки для взаимодействия с серверами gRPC;
jq — JSON-процессор командной строки;
yq — YAML-, JSON- и XML-процессор командной строки;
Docker — платформа для разработки контейнерных приложений;
Git — система контроля версий;
tree — утилита для просмотра дерева директорий;
tmux — терминальный мультиплексор.
```
![image](https://github.com/user-attachments/assets/8db825f6-f812-40fa-9ff4-28af5a001e10)



## Задача 2

Выберите один из вариантов платформы в зависимости от задачи. Здесь нет однозначно верного ответа так как все зависит от конкретных условий: финансирование, компетенции специалистов, удобство использования, надежность, требования ИБ и законодательства, фазы луны.

Тип платформы:

- физические сервера;
- паравиртуализация;
- виртуализация уровня ОС;

Задачи:

- высоконагруженная база данных MySql, критичная к отказу;
- различные web-приложения;
- Windows-системы для использования бухгалтерским отделом;
- системы, выполняющие высокопроизводительные расчёты на GPU.

Объясните критерии выбора платформы в каждом случае.

## Решение Задача 2

Выбор платформы для различных задач зависит от множества факторов, включая требования к производительности, надежности, безопасности, а также доступные ресурсы и компетенции специалистов. Рассмотрим каждый из предложенных случаев:

### 1. Высоконагруженная база данных MySQL, критичная к отказу

**Рекомендуемая платформа: Физические серверы или паравиртуализация.**

**Критерии выбора:**
- **Производительность:** Физические серверы обеспечивают максимальную производительность, так как исключают накладные расходы на виртуализацию. Паравиртуализация также может быть хорошим выбором, если требуется гибкость и возможность быстрого масштабирования.
- **Надежность:** Для критичных к отказу систем важно иметь возможность использовать резервирование и кластеризацию. Физические серверы могут быть настроены в кластеры для обеспечения высокой доступности.
- **Безопасность:** Физические серверы могут обеспечить более высокий уровень безопасности, так как они изолированы от других систем.
- **Управление:** Паравиртуализация может упростить управление и развертывание, но требует более тщательной настройки для обеспечения отказоустойчивости.

### 2. Различные web-приложения

**Рекомендуемая платформа: Виртуализация уровня ОС (например, Docker) или паравиртуализация.**

**Критерии выбора:**
- **Гибкость и масштабируемость:** Виртуализация уровня ОС позволяет быстро развертывать и масштабировать приложения, что особенно важно для web-приложений с переменной нагрузкой.
- **Изоляция:** Контейнеры обеспечивают изоляцию приложений, что позволяет избежать конфликтов между ними.
- **Управление ресурсами:** Паравиртуализация может быть использована для более сложных приложений, требующих выделенных ресурсов, но виртуализация уровня ОС обычно более эффективна для web-приложений.

### 3. Windows-системы для использования бухгалтерским отделом

**Рекомендуемая платформа: Паравиртуализация или физические серверы.**

**Критерии выбора:**
- **Совместимость:** Windows-системы могут требовать специфического оборудования или лицензирования, что может повлиять на выбор платформы.
- **Производительность:** Если приложения требуют высокой производительности, лучше использовать физические серверы. Если же важна гибкость и возможность быстрого развертывания, паравиртуализация может быть предпочтительнее.
- **Управление:** Паравиртуализация позволяет легко управлять несколькими экземплярами Windows-систем, что может быть полезно для бухгалтерского отдела.

### 4. Системы, выполняющие высокопроизводительные расчёты на GPU

**Рекомендуемая платформа: Физические серверы.**

**Критерии выбора:**
- **Производительность:** Высокопроизводительные вычисления требуют максимальной производительности, которую могут обеспечить только физические серверы с выделенными GPU.
- **Надежность:** Для критичных вычислений важно иметь надежное оборудование, которое может работать без сбоев.
- **Управление ресурсами:** Виртуализация может добавить накладные расходы, что нежелательно для задач, требующих высокой производительности. Однако, если необходимо использовать несколько GPU, паравиртуализация может быть рассмотрена, но с учетом возможных потерь в производительности.

### Заключение

Выбор платформы зависит от конкретных требований и условий. Важно учитывать не только технические характеристики, но и финансовые, организационные и юридические аспекты, чтобы обеспечить оптимальное решение для каждой задачи.

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

## Решение Задача 3

Для каждого из предложенных сценариев можно выбрать подходящую систему управления виртуализацией, основываясь на требованиях и условиях. Рассмотрим каждый случай:

### 1. 100 виртуальных машин на базе Linux и Windows

**Рекомендуемая система: VMware vSphere или Microsoft Hyper-V.**

**Обоснование выбора:**
- **Поддержка различных ОС:** Оба решения поддерживают как Windows, так и Linux виртуальные машины, что соответствует требованиям сценария.
- **Функциональность:** VMware vSphere и Microsoft Hyper-V предлагают мощные функции, такие как программные балансировщики нагрузки, репликация данных и автоматизированные механизмы резервного копирования.
- **Управление:** Обе платформы имеют удобные интерфейсы для управления большим количеством виртуальных машин, что упрощает администрирование.
- **Интеграция:** Если инфраструктура преимущественно Windows-based, Hyper-V может быть более естественным выбором, так как он интегрирован в Windows Server.

### 2. Наиболее производительное бесплатное open source-решение для виртуализации

**Рекомендуемая система: Proxmox VE.**

**Обоснование выбора:**
- **Open Source:** Proxmox VE является бесплатным и открытым решением, что соответствует требованиям.
- **Поддержка KVM и LXC:** Proxmox использует KVM для полной виртуализации и LXC для контейнеризации, что позволяет эффективно управлять как виртуальными машинами, так и контейнерами.
- **Производительность:** Proxmox VE обеспечивает высокую производительность и масштабируемость, что подходит для небольшой инфраструктуры из 20-30 серверов.
- **Управление:** Удобный веб-интерфейс и поддержка кластеризации делают управление виртуальными машинами простым и интуитивно понятным.

### 3. Бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры

**Рекомендуемая система: KVM (с использованием oVirt или Kimchi для управления).**

**Обоснование выбора:**
- **Совместимость:** KVM является частью ядра Linux и обеспечивает хорошую совместимость с Windows виртуальными машинами.
- **Производительность:** KVM предлагает высокую производительность и может эффективно использовать ресурсы хоста.
- **Open Source:** KVM является бесплатным решением, что соответствует требованиям.
- **Управление:** oVirt и Kimchi предоставляют удобные интерфейсы для управления виртуальными машинами на базе KVM, что упрощает администрирование Windows-инфраструктуры.

### 4. Рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux

**Рекомендуемая система: VirtualBox.**

**Обоснование выбора:**
- **Простота использования:** VirtualBox является бесплатным и простым в использовании решением, что делает его идеальным для тестирования.
- **Поддержка различных дистрибутивов:** VirtualBox поддерживает множество дистрибутивов Linux, что позволяет легко создавать и управлять различными тестовыми окружениями.
- **Локальная установка:** VirtualBox можно установить на локальные машины, что позволяет разработчикам быстро развертывать тестовые окружения без необходимости в сложной инфраструктуре.
- **Гибкость:** VirtualBox позволяет легко создавать снимки и клонировать виртуальные машины, что удобно для тестирования и разработки.

### Заключение

Выбор системы управления виртуализацией зависит от конкретных требований и условий каждого сценария. Важно учитывать не только функциональность и производительность, но и удобство использования, совместимость и стоимость решения.

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, создавали бы вы гетерогенную среду или нет?


## Решение Задача 4

Гетерогенная среда виртуализации, в которой используются несколько систем управления виртуализацией одновременно, может предложить определенные преимущества, такие как гибкость и возможность использования лучших решений для конкретных задач. Однако она также может привести к ряду проблем и недостатков. Рассмотрим возможные проблемы и способы их минимизации.

### Возможные проблемы и недостатки гетерогенной среды виртуализации

1. **Сложность управления:**
   - Использование нескольких систем управления виртуализацией увеличивает сложность администрирования. Администраторам необходимо знать и уметь работать с разными инструментами и интерфейсами.

2. **Совместимость:**
   - Разные системы могут иметь проблемы совместимости, что может затруднить интеграцию и взаимодействие между виртуальными машинами, работающими на разных платформах.

3. **Увеличение затрат:**
   - Гетерогенная среда может привести к увеличению затрат на обучение персонала, поддержку и лицензирование различных систем.

4. **Безопасность:**
   - Разные системы могут иметь разные уровни безопасности и управления доступом, что может создать уязвимости в инфраструктуре.

5. **Мониторинг и отчетность:**
   - Сложнее реализовать единый подход к мониторингу и отчетности, так как разные системы могут предоставлять разные метрики и данные.

6. **Резервное копирование и восстановление:**
   - Разные системы могут требовать различных подходов к резервному копированию и восстановлению, что усложняет процесс обеспечения отказоустойчивости.

### Минимизация рисков и проблем

1. **Стандартизация:**
   - Определите стандарты и лучшие практики для управления виртуализацией, чтобы обеспечить согласованность в использовании различных систем.

2. **Обучение и документация:**
   - Обеспечьте обучение для администраторов и пользователей по всем используемым системам. Создайте документацию, которая поможет в управлении и интеграции различных платформ.

3. **Интеграция инструментов:**
   - Используйте инструменты управления, которые могут интегрироваться с несколькими системами виртуализации, чтобы упростить мониторинг и управление.

4. **Безопасность:**
   - Разработайте единые политики безопасности и управления доступом, которые будут применяться ко всем системам, чтобы минимизировать уязвимости.

5. **Единый подход к резервному копированию:**
   - Используйте решения для резервного копирования, которые поддерживают несколько платформ, чтобы упростить процесс резервного копирования и восстановления.

6. **Мониторинг:**
   - Внедрите централизованные решения для мониторинга, которые могут собирать данные из различных систем виртуализации, чтобы обеспечить единый обзор состояния инфраструктуры.

### Личное мнение о создании гетерогенной среды

Если бы у меня был выбор, я бы предпочел избегать создания гетерогенной среды, если это возможно. Основные причины:

- **Упрощение управления:** Единая система управления виртуализацией упрощает администрирование, обучение и поддержку.
- **Снижение рисков:** Меньше систем означает меньше потенциальных проблем с совместимостью, безопасностью и интеграцией.
- **Оптимизация затрат:** Использование одной платформы может снизить затраты на лицензирование и обучение.

Тем не менее, если конкретные требования бизнеса или технические задачи требуют использования нескольких систем, то важно тщательно планировать и реализовывать меры по минимизации рисков, как описано выше.

### Правила приема

Домашнее задание выполните в файле readme.md в GitHub-репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.
